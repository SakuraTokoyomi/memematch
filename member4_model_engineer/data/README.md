# 数据目录说明

## ⚠️ 重要提示

本目录中的数据需要**成员2（数据构建工程师）**提供。

当前提供的 `*_sample.json` 文件仅为**示例格式**，用于代码测试。

---

## 📋 所需数据文件

### 1. `memes.json` - 表情包库

**数量要求**：150-200 个表情包

**格式**：
```json
[
  {
    "id": "meme_001",
    "label": "黑人问号",
    "keywords": ["困惑", "啥意思", "???", "不理解", "什么鬼"],
    "description": "表示困惑不解的黑人问号表情",
    "image_path": "images/meme_001.jpg",
    "emotion": "困惑",
    "safety_level": "safe"
  },
  {
    "id": "meme_002",
    "label": "笑哭了",
    "keywords": ["哈哈哈", "太好笑", "笑死", "搞笑", "笑不活了"],
    "description": "笑到流泪的表情",
    "image_path": "images/meme_002.jpg",
    "emotion": "开心",
    "safety_level": "safe"
  }
]
```

**字段说明**：
- `id`：唯一标识符
- `label`：表情包名称/标签
- `keywords`：触发关键词列表（3-5个）
- `description`：详细描述（可选）
- `image_path`：图片路径（可选，供Demo使用）
- `emotion`：情绪标签（可选）
- `safety_level`：安全等级（可选）

---

### 2. `queries_train.json` - 训练查询集

**数量要求**：400-640 条（约占总数据的 80%）

**格式**：
```json
[
  {
    "id": "query_001",
    "text": "这是什么鬼操作",
    "emotion": "困惑",
    "language": "zh",
    "toxicity": "safe"
  },
  {
    "id": "query_002",
    "text": "哈哈哈太好笑了",
    "emotion": "开心",
    "language": "zh",
    "toxicity": "safe"
  }
]
```

**字段说明**：
- `id`：唯一标识符
- `text`：聊天句子
- `emotion`：情绪标签（可选）
- `language`：语言标识（可选）
- `toxicity`：毒性标签（可选）

---

### 3. `queries_test.json` - 测试查询集

**数量要求**：100-160 条（约占总数据的 20%）

**格式**：同 `queries_train.json`

⚠️ **注意**：测试集需要与训练集完全分离，不能有重复句子。

---

### 4. `ground_truth.json` - 标注答案

**格式**：
```json
{
  "train": {
    "query_001": ["meme_001", "meme_023"],
    "query_002": ["meme_002"]
  },
  "test": {
    "query_401": ["meme_005", "meme_012"],
    "query_402": ["meme_089"]
  }
}
```

**说明**：
- 每个查询ID对应一个表情包ID列表（Top-1或Top-2标注）
- 用于计算 Recall@k 和 MRR 指标

---

## 📝 数据质量要求

### 1. 表情包（Memes）
- ✅ 每个表情包至少有 3 个触发关键词
- ✅ 标签简洁明了（2-5个字）
- ✅ 覆盖常见情绪：开心、困惑、震惊、无语、生气、支持等
- ✅ 避免版权问题（使用公开授权或自绘表情）

### 2. 查询句子（Queries）
- ✅ 长度：5-30个字
- ✅ 风格：口语化、网络化
- ✅ 覆盖：中文、英文、中英混合
- ✅ 情绪分布均衡
- ✅ 去标识化（无个人隐私信息）

### 3. 标注（Ground Truth）
- ✅ 每条句子至少标注 1 个合适表情包
- ✅ 可以标注多个（表示都合适）
- ✅ 标注一致性检查（多人标注取交集）

---

## 🔍 数据验证清单

在将数据提交给模型工程师之前，请检查：

```bash
# 成员2可以运行的验证脚本（暂未提供，可自行编写）
python validate_data.py

# 应该检查：
# ✓ JSON格式正确
# ✓ 所有ID唯一
# ✓ ground_truth中的ID都存在于memes.json和queries.json
# ✓ 没有空字段
# ✓ 训练集和测试集无重叠
```

---

## 📊 数据统计（示例）

期望的数据分布：

| 数据类型 | 数量 | 备注 |
|---------|------|------|
| 表情包 | 150-200 | 每个3-5个关键词 |
| 训练句子 | 400-640 | 80%数据 |
| 测试句子 | 100-160 | 20%数据 |
| 标注对 | 500-800 | 每句至少1个标注 |

情绪分布建议：
- 开心/搞笑：30%
- 困惑/疑问：20%
- 无语/震惊：20%
- 支持/赞同：15%
- 拒绝/生气：10%
- 其他：5%

---

## 🤝 与成员2的协作流程

### Step 1: 成员2完成数据构建
- 收集/生成表情包
- 编写触发词
- 收集/生成查询句子
- 完成标注

### Step 2: 数据格式转换
- 按照本文档格式组织数据
- 生成4个JSON文件

### Step 3: 数据验证
- 自行检查格式正确性
- 统计数据分布

### Step 4: 提交给成员4
- 将4个JSON文件放入本目录
- 通知成员4："数据已就绪"

### Step 5: 成员4接收确认
- 运行数据加载测试
- 如有问题及时反馈成员2

---

## 📞 联系方式

**数据提供方**：成员2（数据构建工程师）  
**数据使用方**：成员4（模型工程师）

如有数据格式疑问，请及时沟通！

---

## 📅 时间节点

- **Day 1-3**：成员2构建数据
- **Day 4**：数据提交给成员4
- **Day 5-7**：成员4运行模型评估

**当前状态**：⏳ 等待成员2提供数据


